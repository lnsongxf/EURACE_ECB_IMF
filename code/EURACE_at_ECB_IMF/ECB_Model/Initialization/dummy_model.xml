 <xmodel version="2">
 <name>Dummy Initialization module for housing, mortgage, rental markets</name>
 <version>Version 2.0, 13/06/2017</version>
 <description>Authors: Sander van der Hoog</description>
 <models/>
 <environment>
  <constants/>
  <functionFiles>
   <file>Household_dummy_init_functions.c</file>
   <file>Bank_dummy_init_functions.c</file>
  </functionFiles>
  <timeUnits/>
  <dataTypes/>
 </environment>
 <agents>
  <xagent>
   <name>Household</name>
   <description></description>
   <memory/>
    <functions>
    <function>
     <name>Household_init_mortgages</name>
     <description>Function to initialize the sythetic mortgage, consistent with online simulation data. Note: this function runs only once, when iteration is init_transient_period.</description>
     <currentState>init_00</currentState>
     <nextState>init_01</nextState>
     <condition>
      <lhs>
        <lhs>
          <value>iteration_loop</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>a.init_transient_period</value>
        </rhs>
      </lhs>
      <op>AND</op>
      <rhs>
        <lhs>
          <value>a.switch_real_estate_sector</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>1</value>
        </rhs>
      </rhs>
    </condition>
     <inputs/>
     <outputs>
      <output>
       <messageName>mortgage_info</messageName>
      </output>
     </outputs>
    </function>

    <function>
     <name>Household_init_rent</name>
     <description>Function to initialize the rent value.</description>
     <currentState>init_01</currentState>
     <nextState>init_02</nextState>
    </function>


    <function>
     <name>idle</name>
     <description>idle for Household_init_mortgages</description>
     <currentState>init_00</currentState>
     <nextState>init_02</nextState>
     <condition>
      <lhs>
        <not>
		<lhs>
          <value>iteration_loop</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>a.init_transient_period</value>
        </rhs>
		</not>
      </lhs>
      <op>AND</op>
      <rhs>
        <lhs>
          <value>a.switch_real_estate_sector</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>1</value>
        </rhs>
      </rhs>
    </condition>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Household_read_real_estate_statistics</name>
     <description>idle to connect Household_init_mortgages to tenants/owners/landlords init functions</description>
     <currentState>init_02</currentState>
     <nextState>init_03</nextState>
     <condition>
       <time>
        <period>monthly</period>
        <phase>2</phase>
       </time>
     </condition>
     <inputs>
      <input>
      <messageName>real_estate_statistics</messageName>
    </input>
    </inputs>
     <outputs/>
    </function>
    <function>
     <name>idle</name>
     <description>idle to skip tenants/owners/landlords init functions</description>
     <currentState>init_02</currentState>
     <nextState>init_04</nextState>
     <condition>
      <not>
       <time>
        <period>monthly</period>
        <phase>2</phase>
       </time>
     </not>
     </condition>
     <inputs/>
     <outputs/>
    </function>

    <function>
     <name>Household_init_housing_states</name>
     <description>Function to initialize the homeless</description>
     <currentState>init_03</currentState>
     <nextState>init_04</nextState>
     <inputs/>
     <outputs>
      <output>
       <messageName>homeless_info</messageName>
      </output>
      <output>
       <messageName>tenant_info</messageName>
      </output>
      <output>
       <messageName>owner_info</messageName>
      </output>
      <output>
       <messageName>landlord_info</messageName>
      </output>
     </outputs>
    </function>
    <function>
     <name>Household_read_rent_matching_info</name>
     <description>Function to initialize both tenant and landlords, receiving info from ClearingHouse. Note: this function runs only once, when iteration is init_transient_period.</description>
     <currentState>init_04</currentState>
     <nextState>Household_Start_Monthly_Loop_Top</nextState>
     <condition>
      <lhs>
       <value>iteration_loop</value>
     </lhs>
     <op>EQ</op>
     <rhs>
       <value>a.init_transient_period</value>
     </rhs>
     </condition>
     <inputs>
      <input>
       <messageName>house_price_index</messageName>
      </input>
      <input>
       <messageName>rent_matching_info</messageName>
        <filter>
          <lhs>
            <lhs>
             <value>a.id</value>
            </lhs>
            <op>EQ</op>
            <rhs>
             <value>m.tenant_id</value>
            </rhs>
          </lhs>
          <op>OR</op>
          <rhs>
            <lhs>
             <value>a.id</value>
            </lhs>
            <op>EQ</op>
            <rhs>
             <value>m.landlord_id</value>
            </rhs>
          </rhs>
       </filter>
      </input>
      <input>
       <messageName>hmr_matching_info</messageName>
        <filter>
            <lhs>
             <value>a.id</value>
            </lhs>
            <op>EQ</op>
            <rhs>
             <value>m.owner_id</value>
            </rhs>
       </filter>
      </input>
      </inputs>
     <outputs/>
    </function>
    <function>
     <name>idle</name>
     <description>idle to skip Household_read_rent_matching_info</description>
     <currentState>init_04</currentState>
     <nextState>Household_Start_Monthly_Loop_Top</nextState>
     <condition>
      <not>
      <lhs>
       <value>iteration_loop</value>
       </lhs>
       <op>EQ</op>
       <rhs>
       <value>a.init_transient_period</value>
      </rhs>
      </not>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    </functions>
  </xagent>

  <xagent>
   <name>Bank</name>
   <description></description>
   <memory/>
    <functions>
    <function>
     <name>Bank_init_mortgages</name>
     <description>Function to initialize the bank's mortgage portfolio from data send by households. Note: this function runs only once, when iteration is init_transient_period.</description>
     <currentState>Bank_init_after_transient</currentState>
     <nextState>Bank_update_policy_rate</nextState>
     <condition>
        <lhs>
          <value>iteration_loop</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>a.init_transient_period</value>
        </rhs>
     </condition>
     <inputs>
      <input>
       <messageName>mortgage_info</messageName>
      </input>
     </inputs>
     <outputs/>
    </function>
    <function>
     <name>idle</name>
     <description>idle for Bank_init_mortgages</description>
     <currentState>Bank_init_after_transient</currentState>
     <nextState>Bank_update_policy_rate</nextState>
     <condition>
      <not>
        <lhs>
          <value>iteration_loop</value>
        </lhs>
        <op>EQ</op>
        <rhs>
          <value>a.init_transient_period</value>
        </rhs>
      </not>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    </functions>
  </xagent>
 </agents>
 <messages/>
</xmodel>